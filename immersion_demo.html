<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Immersive Writing Demo</title>
    <style>
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(120deg, #f5f7fa 0%, #c3cfe2 100%);
            margin: 0; padding: 0;
            min-height: 100vh;
            transition: background 1s;
        }
        .immersive {
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            background: rgba(255,255,255,0.85);
            border-radius: 16px;
            max-width: 600px;
            margin: 4em auto;
            padding: 2em;
            position: relative;
        }
        textarea {
            width: 100%;
            height: 180px;
            border: none;
            background: transparent;
            font-size: 1.2em;
            outline: none;
            resize: none;
            color: #333;
        }
        .focus-glow {
            box-shadow: 0 0 24px 4px #a3bffa;
            transition: box-shadow 0.5s;
        }
        .typing-glow {
            box-shadow: 0 0 32px 8px #6ee7b7, 0 0 8px 2px #a3bffa;
            transition: box-shadow 0.3s;
        }
        .ambient-sound {
            position: absolute;
            top: 1em; right: 1em;
            font-size: 1em;
            color: #888;
        }
        .fade-in {
            animation: fadeIn 2s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="immersive fade-in">
        <div class="ambient-sound">
            <label><input type="checkbox" id="soundToggle"> Ambient Rain</label>
        </div>
        <h2>Immersive Writing</h2>
        <textarea id="immersiveInput" placeholder="Start writing..."></textarea>
        <div style="margin-top:1em;">
            <label for="wordMeter">Word Count:</label>
            <progress id="wordMeter" value="0" max="500" style="width:70%;height:18px;"></progress>
            <span id="wordCountLabel">0 / 500</span>
        </div>
    </div>
    <audio id="rainAudio" loop src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b6b2b7c.mp3"></audio>
    <script>
        const textarea = document.getElementById('immersiveInput');
        const rainAudio = document.getElementById('rainAudio');
        const soundToggle = document.getElementById('soundToggle');
        let typingTimeout;
        textarea.addEventListener('focus', () => {
            textarea.classList.add('focus-glow');
            document.body.style.background = 'linear-gradient(120deg, #e0eafc 0%, #cfdef3 100%)';
        });
        textarea.addEventListener('blur', () => {
            textarea.classList.remove('focus-glow');
            textarea.classList.remove('typing-glow');
            document.body.style.background = 'linear-gradient(120deg, #f5f7fa 0%, #c3cfe2 100%)';
        });
        const wordMeter = document.getElementById('wordMeter');
        const wordCountLabel = document.getElementById('wordCountLabel');
        textarea.addEventListener('input', () => {
            textarea.classList.add('typing-glow');
            clearTimeout(typingTimeout);
            typingTimeout = setTimeout(() => {
                textarea.classList.remove('typing-glow');
            }, 700);
            // Word count meter logic
            const wordCount = textarea.value.trim().split(/\s+/).filter(Boolean).length;
            wordMeter.value = wordCount;
            wordCountLabel.textContent = `${wordCount} / ${wordMeter.max}`;
        });
        soundToggle.addEventListener('change', function() {
            if (this.checked) {
                rainAudio.volume = 0.2;
                rainAudio.play();
            } else {
                rainAudio.pause();
            }
        });
    </script>
</body>
</html>
